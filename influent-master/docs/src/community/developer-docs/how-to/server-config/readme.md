---
section: Community
subsection: Developer Docs
chapter: How-To
topic: Server Configuration
permalink: community/developer-docs/how-to/server-config/
layout: submenu
---

# Server Configuration #

The following sections describe the server-side modules and parameters you should configure before deploying your Influent application.

- [Cache](#cache)
- [Authentication (Optional)](#authentication)

## <a name="cache"></a>Cache ##

Influent utilizes [Ehcache](http://ehcache.org/) to store session states in memory and on disk without requiring write access to your source databases.

By default, Ehcache is configured for a server with 8 GB RAM. There are four caches used by Influent:

<div class="props">
	<table class="summaryTable" width="100%">
		<thead>
			<tr>
				<th scope="col" width="20%">Cache</th>
				<th scope="col" width="50%">Stores</th>
				<th scope="col" width="15%">RAM</th>
				<th scope="col" width="15%">Disk Cache</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="property">SimplePageCachingFilter</td>
				<td class="description">Web pages generated by the Server</td>
				<td class="value">0.6 GB</td>
				<td class="value">1.8 GB</td>
			</tr>
			<tr>
				<td class="property">ChartDataCache</td>
				<td class="description">Account activity charts</td>
				<td class="value">0.3 GB</td>
				<td class="value">0.9 GB</td>
			</tr>
			<tr>
				<td class="property">persistenceCache</td>
				<td class="description">State of the Flow workspace</td>
				<td class="value">0.6 GB</td>
				<td class="value">1.8 GB</td>
			</tr>
			<tr>
				<td class="property">dynamicClusteringCache</td>
				<td class="description">Clusters in the Flow workspace</td>
				<td class="value">4.5 GB</td>
				<td class="value">13.5 GB</td>
			</tr>
		</tbody>
	</table>
</div>

<h6 class="procedure">To edit the resources assigned to each cache</h6>

1. Open the [ehcache.xml](https://github.com/unchartedsoftware/influent/blob/master/influent-app/src/main/resources/ehcache.xml) file in the [src/main/resources/](https://github.com/unchartedsoftware/influent/tree/master/influent-app/src/main/resources) directory of your project.
2. Edit the **maxBytesLocalHeap** attribute for each cache to specify the allocated RAM. <p class="list-paragraph">We recommend you allocate 75% of the server RAM among the four caches according the guidelines below and reserve the remaining 25% to working memory.</p>
<div class="props">
	<table class="summaryTable" width="100%">
		<thead>
			<tr>
				<th scope="col" width="40%">Cache</th>
				<th scope="col" width="60%">Portion of Unreserved RAM</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="property">SimplePageCachingFilter</td>
				<td class="value">10%</td>
			</tr>
			<tr>
				<td class="property">ChartDataCache</td>
				<td class="value">5%</td>
			</tr>
			<tr>
				<td class="property">persistenceCache</td>
				<td class="value">10%</td>
			</tr>
			<tr>
				<td class="property">dynamicClusteringCache</td>
				<td class="value">75%</td>
			</tr>
		</tbody>
	</table>
</div>
3. Edit the **maxBytesLocalDisk** attribute for each cache to specify the allocated disk cache.<p class="list-paragraph">We recommend you assign a minimum of 3 times the allocated RAM in disk cache. For example if you assigned 0.6 GB RAM, then assign 1.8 GB disk cache.</p>
4. Edit the **diskstore** element to change the location of the stored caches. By default, Influent stores each cache in the *ehcache.disk.store.dir* directory.
5. Save the [ehcache.xml](https://github.com/unchartedsoftware/influent/blob/master/influent-app/src/main/resources/ehcache.xml) file.

## <a name="authentication"></a> Authentication (Optional) ##

Optional plugin modules like [Apache Shiro](http://shiro.apache.org/) allow you to enable user authentication for you Influent application.

**NOTE**: See the Kiva example application for a sample implementation of Shiro. None of the other example applications enable authentication.

<h6 class="procedure">To use Apache Shiro to enable user authentication</h6>

1. Open the [client-config.js](https://github.com/unchartedsoftware/influent/tree/master/influent-app/src/main/resources/client-config.js) file your project's [src/main/resources/](https://github.com/unchartedsoftware/influent/tree/master/influent-app/src/main/resources/) folder.
2. Set the **useAuth** property to *true* and save the file.
3. Create a login JavaServer Page (JSP) in your project's [src/main/webapp/](https://github.com/unchartedsoftware/influent/tree/master/kiva/src/main/webapp) folder. You can copy and modify the [login.jsp](https://github.com/unchartedsoftware/influent/blob/master/kiva/src/main/webapp/login.jsp) file in the Kiva example application.
4. Open the [server.config](https://github.com/unchartedsoftware/influent/blob/master/kiva/src/main/resources/server.config) file in your project's [src/main/resources/](https://github.com/unchartedsoftware/influent/tree/master/influent-app/src/main/resources/) folder.
5. Add, uncomment or edit the following *SimpleShiroAuthModule* properties file to configure the login and hash algorithm settings:
<div class="props">
	<table class="summaryTable" width="100%">
		<thead>
			<tr>
				<th scope="col" width="35%">Property</th>
				<th scope="col" width="65%">Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="property">shiro.hashAlgorithmName</td>
				<td class="description">Specify the hash algorithm used: <em>MD5</em>, <em>SHA-1</em>, <em>SHA-256</em>, <em>SHA-384</em>, or <em>SHA-512</em>.</td>
			</tr>
			<tr>
				<td class="property">shiro.redirectUrl</td>
				<td class="description">Redirect link (path/filename) that forces users to complete the login page. Defaults to <i>/login.jsp</i>.</td>
			</tr>
			<tr>
				<td class="property">shiro.loginUrl</td>
				<td class="description">Direct link (path/filename) to the login page. Defaults to <i>/login.jsp</i></td>
			</tr>
			<tr>
				<td class="property">shiro.successUrl</td>
				<td class="description">Page (path/filename) to display upon successful login. Defaults to <i>/</i>.</td>
			</tr>
		</tbody>
	</table>
</div>
6. Save the **server.config** file.
7. Create a [shiro.ini](https://github.com/unchartedsoftware/influent/blob/master/kiva/src/main/resources/shiro.ini) file in your [src/main/resources/](https://github.com/unchartedsoftware/influent/blob/master/kiva/src/main/resources/) folder.
8. Populate the **shiro.ini** file with your usernames and password hashes. You can also specify roles for each of your users.

	```
	[users]
	# username = MD5 hash of password, role, role, role
	sgomez = 40324e489076c4c662a8692d69a93ee2
	troberts = dcf73fb31c4834f4a537a07e372e7ce2
	```

9. Save the file.

## Next Steps ##

For information on configuring the Influent client, see the [Client Configuration](../client-config/) topic.

For more information on advanced server settings, see the [Server Settings](../../reference/server/) reference topic.